import{$ as J,A as b,B as $,Ba as it,C as h,Ca as E,D as q,Da as rt,E as Q,Ea as O,Fa as S,Ga as P,Ha as A,I as p,Ia as D,J as k,Ja as nt,K as B,L as w,M as u,N as s,O as m,P as d,Q as R,R as T,S as L,T as V,U as c,V as x,W as j,X as H,Y as W,Z as z,_ as G,aa as N,ba as K,ca as U,da as M,pa as f,ta as X,ua as Y,v as y,va as Z,wa as tt,xa as et,y as v,z as a,za as ot}from"./chunk-TWTZHVSE.js";import{d as _,e as I,f as F}from"./chunk-AJVUTV25.js";var st=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=a({type:t,selectors:[["shared-footer"]],decls:3,vars:0,consts:[[1,"info"]],template:function(o,i){o&1&&(s(0,"footer",0)(1,"p"),c(2,"Double-click to edit a todo"),m()())}});let e=t;return e})();var mt=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=a({type:t,selectors:[["shared-title"]],inputs:{title:"title"},decls:2,vars:1,template:function(o,i){o&1&&(s(0,"h1"),c(1),m()),o&2&&(p(1),x(i.title))}});let e=t;return e})();var pt=(()=>{let t=class t{constructor(l){this.store=l,this.txtInput=new A("",S.required)}addTodo(){this.txtInput.invalid||(this.store.dispatch(X(this.txtInput.value)),this.txtInput.reset())}};t.\u0275fac=function(o){return new(o||t)(k(f))},t.\u0275cmp=a({type:t,selectors:[["app-todo-add"]],decls:3,vars:1,consts:[[1,"header"],["title","Todos"],["placeholder","What needs to be done?","autofocus","",1,"new-todo",3,"formControl","keyup.enter"]],template:function(o,i){o&1&&(s(0,"header",0),d(1,"shared-title",1),s(2,"input",2),T("keyup.enter",function(){return i.addTodo()}),m()()),o&2&&(p(2),u("formControl",i.txtInput))},dependencies:[mt,O,P,D]});let e=t;return e})();function yt(e,t){if(e&1){let n=R();s(0,"li",5),T("click",function(){let i=q(n).$implicit,r=L();return Q(r.changedFilter(i))}),s(1,"a",6),c(2),j(3,"titlecase"),m()()}if(e&2){let n=t.$implicit,l=L();p(1),V("selected",n===l.currentFilter()),p(1),x(H(3,3,n))}}function vt(e,t){if(e&1){let n=R();s(0,"button",7),T("click",function(){q(n);let o=L();return Q(o.clearTodo())}),c(1,"Clear completed"),m()}}var at=(()=>{var t;let n=class n{constructor(){I(this,t,void 0);this.currentFilter=h("all"),this.validFilters=h(["all","completed","pending"]),F(this,t,v(f)),this.itemLeft=h(0),this.taskCompleted=h(!1)}ngOnInit(){_(this,t).select("filtres").subscribe({next:o=>this.currentFilter.set(o)}),_(this,t).subscribe(({filtres:o,todos:i})=>{this.currentFilter.set(o),this.itemLeft.set(i.filter(({completed:r})=>!r).length),this.taskCompleted.set(i.findIndex(({completed:r})=>r)!==-1)})}changedFilter(o){this.currentFilter()!==o&&_(this,t).dispatch(ot({filtro:o}))}clearTodo(){_(this,t).dispatch(et())}};t=new WeakMap,n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=a({type:n,selectors:[["app-todo-footer"]],decls:8,vars:3,consts:[[1,"footer"],[1,"todo-count"],[1,"filters"],[3,"click",4,"ngFor","ngForOf"],["class","clear-completed",3,"click",4,"ngIf"],[3,"click"],["routerLink","./"],[1,"clear-completed",3,"click"]],template:function(i,r){i&1&&(s(0,"footer",0)(1,"span",1)(2,"strong"),c(3),m(),c(4," item left"),m(),s(5,"ul",2),w(6,yt,4,5,"li",3),m(),w(7,vt,2,0,"button",4),m()),i&2&&(p(3),x(r.itemLeft()),p(3),u("ngForOf",r.validFilters()),p(1),u("ngIf",r.taskCompleted()))},dependencies:[N,K,it,U]});let e=n;return e})();var kt=["inputText"],ct=(()=>{var t;let n=class n{constructor(o){I(this,t,void 0);this.store=o,F(this,t,v(f)),this.editSignal=h(!1),this.chkComplete=h(new A(!1,S.required)),B(()=>{this.chkComplete().valueChanges.subscribe(i=>{if(!i)return;let r={id:this.todoItem.id};this.store.dispatch(Y(r))})})}ngOnInit(){this.todoItem&&(this.txtInput=new A(this.todoItem.text,[S.required,S.minLength(6)]))}editing(){this.editSignal.set(!0),this.txtInput.setValue(this.todoItem.text),setTimeout(()=>{this.textInput.nativeElement.select()},1)}endEdit(){this.editSignal.set(!1),!this.txtInput.invalid&&this.txtInput.value!==this.todoItem.text&&this.store.dispatch(Z({id:this.todoItem.id,text:this.txtInput.value}))}deleteTodo(){this.store.dispatch(tt({id:this.todoItem.id}))}};t=new WeakMap,n.\u0275fac=function(i){return new(i||n)(k(f))},n.\u0275cmp=a({type:n,selectors:[["app-todo-item"]],viewQuery:function(i,r){if(i&1&&G(kt,5),i&2){let g;z(g=J())&&(r.textInput=g.first)}},inputs:{todoItem:"todoItem"},decls:8,vars:7,consts:[[1,"view"],["type","checkbox",1,"toggle",3,"formControl"],[3,"dblclick"],[1,"destroy",2,"border","1px solid red","border-radius","50%","cursor","pointer",3,"click"],["type","text",1,"edit",3,"formControl","blur"],["inputText",""]],template:function(i,r){i&1&&(s(0,"li")(1,"div",0),d(2,"input",1),s(3,"label",2),T("dblclick",function(){return r.editing()}),c(4),m(),s(5,"button",3),T("click",function(){return r.deleteTodo()}),m()(),s(6,"input",4,5),T("blur",function(){return r.endEdit()}),m()()),i&2&&(V("completed",r.todoItem.completed)("editing",r.editSignal()),p(2),u("formControl",r.chkComplete()),p(2),x(r.todoItem.text),p(2),u("formControl",r.txtInput))},dependencies:[O,rt,P,D]});let e=n;return e})();var dt=(()=>{let t=class t{transform(l,o){let i={completed:r=>r.filter(({completed:g})=>g),pending:r=>r.filter(({completed:g})=>!g)};switch(o){case"all":return l;case"completed":return i.completed(l);case"pending":return i.pending(l);default:return l}}};t.\u0275fac=function(o){return new(o||t)},t.\u0275pipe=$({name:"filterTodo",type:t,pure:!0});let e=t;return e})();function wt(e,t){if(e&1&&d(0,"app-todo-item",2),e&2){let n=t.$implicit;u("todoItem",n)}}var ft=(()=>{var t;let n=class n{constructor(o){I(this,t,void 0);this.store=o,this.todosList=[],this.filterTodo=h("all"),F(this,t,v(f))}ngOnInit(){this.store.subscribe({next:({todos:o,filtres:i})=>{this.todosList=o,this.filterTodo.set(i)},error:o=>this.todosList=[]})}};t=new WeakMap,n.\u0275fac=function(i){return new(i||n)(k(f))},n.\u0275cmp=a({type:n,selectors:[["app-todo-list"]],decls:3,vars:4,consts:[[1,"todo-list"],[3,"todoItem",4,"ngFor","ngForOf"],[3,"todoItem"]],template:function(i,r){i&1&&(s(0,"ul",0),w(1,wt,1,1,"app-todo-item",1),j(2,"filterTodo"),m()),i&2&&(p(1),u("ngForOf",W(2,1,r.todosList,r.filterTodo())))},dependencies:[N,ct,dt]});let e=n;return e})();var ut=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=a({type:t,selectors:[["app-home-page"]],decls:9,vars:0,consts:[[1,"todoapp"],[1,"main"],["id","toggle-all","type","checkbox",1,"toggle-all"],["for","toggle-all"]],template:function(o,i){o&1&&(s(0,"section",0),d(1,"app-todo-add"),s(2,"section",1),d(3,"input",2),s(4,"label",3),c(5,"Mark all as complete"),m(),d(6,"app-todo-list"),m(),d(7,"app-todo-footer"),m(),d(8,"shared-footer"))},dependencies:[st,pt,at,ft]});let e=t;return e})();var At=[{path:"",component:ut},{path:"**",redirectTo:"todo",pathMatch:"full"}],ht=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=b({type:t}),t.\u0275inj=y({imports:[E.forChild(At),E]});let e=t;return e})();var Ct=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=b({type:t}),t.\u0275inj=y({imports:[M]});let e=t;return e})();var ke=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=b({type:t}),t.\u0275inj=y({imports:[M,ht,Ct,E,nt]});let e=t;return e})();export{ke as TodoModule};
